   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"smi_drv_gpio_sim.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "../Switch/core/drv/master_drv/smi_drv_gpio_sim.c"
  18              		.section	.text.smi_write_bits,"ax",%progbits
  19              		.align	1
  20              		.global	smi_write_bits
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	smi_write_bits:
  26              	.LVL0:
  27              	.LFB6:
   1:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** /*******************************************************************************
   2:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** *                                                                              *
   3:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** *  Copyright (c), 2023, Motorcomm Electronic Technology Co.,Ltd.               *
   4:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** *  Motorcomm Confidential and Proprietary.                                     *
   5:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** *                                                                              *
   6:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** ********************************************************************************
   7:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** */
   8:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
   9:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** typedef unsigned int    uint32_t;
  10:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** typedef unsigned char   uint8_t;
  11:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** typedef unsigned short  uint16_t;
  12:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** typedef int             int32_t;
  13:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  14:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define SMI_ST_CODE   0x1
  15:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define SMI_OP_READ   0x2
  16:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define SMI_OP_WRITE  0x1
  17:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define SMI_TA_CODE   0x2
  18:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  19:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** /* porting the follow macro or function according to the platform */
  20:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define GPIO_DIR_IN     0
  21:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define GPIO_DIR_OUT    1
  22:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  23:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** /* GPIO used for SMI data */
  24:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define GPIO_MDIO       0
  25:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** /* GPIO used for SMI clock */
  26:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define GPIO_MDC        1
  27:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** #define DELAY           100
  28:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  29:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static void smi_lock(void)
  30:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  31:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return;
  32:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  33:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  34:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static void smi_unlock(void)
  35:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  36:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return;
  37:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  38:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  39:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static inline void smi_delay(uint32_t delay)
  40:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  41:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     /*
  42:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****      According to the protocol requirements, it is recommended that
  43:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****      the minimum value of MDC High Pulse Width is 160ns
  44:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****      the minimum value of MDC Low Pulse Width is 160ns
  45:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****      the minimum value of MDC Period is 400ns
  46:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     */
  47:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return;
  48:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  49:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  50:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static int32_t gpio_set_dir(uint32_t gpioId, uint8_t dir)
  51:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  52:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return 0;
  53:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  54:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  55:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static int32_t gpio_write_bit(uint32_t gpioId, uint16_t data)
  56:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  57:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return 0;
  58:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  59:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  60:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** static int32_t gpio_read_bit(uint32_t gpioId, uint16_t *data)
  61:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  62:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return 0;
  63:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  64:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** /* porting the above macro or function according to the platform */
  65:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  66:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** void smi_write_bits(uint16_t data, uint32_t len)
  67:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  28              		.loc 1 67 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  68:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     gpio_set_dir(GPIO_MDC, GPIO_DIR_OUT);
  33              		.loc 1 68 5 view .LVU1
  69:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     gpio_set_dir(GPIO_MDIO, GPIO_DIR_OUT);
  34              		.loc 1 69 5 view .LVU2
  70:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     for( ; len > 0; len--)
  35              		.loc 1 70 5 view .LVU3
  36 0000 00E0     		b	.L2
  37              	.L3:
  71:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     {
  72:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         gpio_write_bit(GPIO_MDC, 0);
  38              		.loc 1 72 9 view .LVU4
  73:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  39              		.loc 1 73 9 view .LVU5
  74:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         if (data & (1 << (len - 1)))
  40              		.loc 1 74 9 view .LVU6
  41              		.loc 1 74 31 is_stmt 0 view .LVU7
  42 0002 0139     		subs	r1, r1, #1
  43              	.LVL1:
  44              	.L2:
  70:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     {
  45              		.loc 1 70 16 is_stmt 1 discriminator 1 view .LVU8
  46 0004 0029     		cmp	r1, #0
  47 0006 FCD1     		bne	.L3
  75:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****             gpio_write_bit(GPIO_MDIO, 1);
  76:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         else
  77:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****             gpio_write_bit(GPIO_MDIO, 0);
  78:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  79:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  80:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         gpio_write_bit(GPIO_MDC, 1);
  81:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  82:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     }
  83:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     gpio_write_bit(GPIO_MDC, 0);
  84:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  48              		.loc 1 84 1 is_stmt 0 view .LVU9
  49 0008 7047     		bx	lr
  50              		.cfi_endproc
  51              	.LFE6:
  53              		.section	.text.smi_read_bits,"ax",%progbits
  54              		.align	1
  55              		.global	smi_read_bits
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  60              	smi_read_bits:
  61              	.LVL2:
  62              	.LFB7:
  85:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  86:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** void smi_read_bits(uint32_t len, uint16_t *data)
  87:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
  63              		.loc 1 87 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  88:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     uint16_t tmp = 0;
  68              		.loc 1 88 5 view .LVU11
  89:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
  90:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     gpio_set_dir(GPIO_MDIO, GPIO_DIR_IN);
  69              		.loc 1 90 5 view .LVU12
  91:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     for (*data = 0; len > 0; len--)
  70              		.loc 1 91 5 view .LVU13
  71              		.loc 1 91 16 is_stmt 0 view .LVU14
  72 0000 0023     		movs	r3, #0
  73 0002 0B80     		strh	r3, [r1]	@ movhi
  74              		.loc 1 91 5 view .LVU15
  75 0004 00E0     		b	.L5
  76              	.L6:
  92:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     {
  93:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         gpio_read_bit(GPIO_MDIO, &tmp);
  77              		.loc 1 93 9 is_stmt 1 discriminator 3 view .LVU16
  94:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         *data |= ((tmp & 0x1) << (len - 1));
  78              		.loc 1 94 9 discriminator 3 view .LVU17
  79              		.loc 1 94 39 is_stmt 0 discriminator 3 view .LVU18
  80 0006 0138     		subs	r0, r0, #1
  81              	.LVL3:
  95:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  82              		.loc 1 95 9 is_stmt 1 discriminator 3 view .LVU19
  96:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         gpio_write_bit(GPIO_MDC, 1);
  83              		.loc 1 96 9 discriminator 3 view .LVU20
  97:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  84              		.loc 1 97 9 discriminator 3 view .LVU21
  98:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         gpio_write_bit(GPIO_MDC, 0);
  85              		.loc 1 98 9 discriminator 3 view .LVU22
  99:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****         smi_delay(DELAY);
  86              		.loc 1 99 9 discriminator 3 view .LVU23
  91:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     {
  87              		.loc 1 91 33 discriminator 3 view .LVU24
  88              	.L5:
  91:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     {
  89              		.loc 1 91 25 discriminator 1 view .LVU25
  90 0008 0028     		cmp	r0, #0
  91 000a FCD1     		bne	.L6
 100:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     }
 101:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
  92              		.loc 1 101 1 is_stmt 0 view .LVU26
  93 000c 7047     		bx	lr
  94              		.cfi_endproc
  95              	.LFE7:
  97              		.section	.text.smi_write_cl22,"ax",%progbits
  98              		.align	1
  99              		.global	smi_write_cl22
 100              		.syntax unified
 101              		.thumb
 102              		.thumb_func
 104              	smi_write_cl22:
 105              	.LVL4:
 106              	.LFB8:
 102:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
 103:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** uint32_t smi_write_cl22(uint8_t phyAddr, uint8_t regAddr, uint16_t regVal)
 104:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
 107              		.loc 1 104 1 is_stmt 1 view -0
 108              		.cfi_startproc
 109              		@ args = 0, pretend = 0, frame = 0
 110              		@ frame_needed = 0, uses_anonymous_args = 0
 111              		@ link register save eliminated.
 105:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_lock();
 112              		.loc 1 105 5 view .LVU28
 106:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(0xffff, 16);
 113              		.loc 1 106 5 view .LVU29
 107:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(0xffff, 16);
 114              		.loc 1 107 5 view .LVU30
 108:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(SMI_ST_CODE, 2);
 115              		.loc 1 108 5 view .LVU31
 109:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(SMI_OP_WRITE, 2);
 116              		.loc 1 109 5 view .LVU32
 110:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(phyAddr, 5);
 117              		.loc 1 110 5 view .LVU33
 111:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(regAddr, 5);
 118              		.loc 1 111 5 view .LVU34
 112:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(SMI_TA_CODE, 2);
 119              		.loc 1 112 5 view .LVU35
 113:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(regVal, 16);
 120              		.loc 1 113 5 view .LVU36
 114:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_unlock();
 121              		.loc 1 114 5 view .LVU37
 115:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
 116:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return 0;
 122              		.loc 1 116 5 view .LVU38
 117:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
 123              		.loc 1 117 1 is_stmt 0 view .LVU39
 124 0000 0020     		movs	r0, #0
 125              	.LVL5:
 126              		.loc 1 117 1 view .LVU40
 127 0002 7047     		bx	lr
 128              		.cfi_endproc
 129              	.LFE8:
 131              		.section	.text.smi_read_cl22,"ax",%progbits
 132              		.align	1
 133              		.global	smi_read_cl22
 134              		.syntax unified
 135              		.thumb
 136              		.thumb_func
 138              	smi_read_cl22:
 139              	.LVL6:
 140              	.LFB9:
 118:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
 119:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** uint32_t smi_read_cl22(uint8_t phyAddr, uint8_t regAddr, uint16_t *pRegVal)
 120:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** {
 141              		.loc 1 120 1 is_stmt 1 view -0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145              		.loc 1 120 1 is_stmt 0 view .LVU42
 146 0000 10B5     		push	{r4, lr}
 147              		.cfi_def_cfa_offset 8
 148              		.cfi_offset 4, -8
 149              		.cfi_offset 14, -4
 150 0002 1446     		mov	r4, r2
 121:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_lock();
 151              		.loc 1 121 5 is_stmt 1 view .LVU43
 122:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(0xffff, 16);
 152              		.loc 1 122 5 view .LVU44
 123:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(0xffff, 16);
 153              		.loc 1 123 5 view .LVU45
 124:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(SMI_ST_CODE, 2);
 154              		.loc 1 124 5 view .LVU46
 125:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(SMI_OP_READ, 2);
 155              		.loc 1 125 5 view .LVU47
 126:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(phyAddr, 5);
 156              		.loc 1 126 5 view .LVU48
 127:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_write_bits(regAddr, 5);
 157              		.loc 1 127 5 view .LVU49
 128:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_read_bits(2, pRegVal);
 158              		.loc 1 128 5 view .LVU50
 159 0004 1146     		mov	r1, r2
 160              	.LVL7:
 161              		.loc 1 128 5 is_stmt 0 view .LVU51
 162 0006 0220     		movs	r0, #2
 163              	.LVL8:
 164              		.loc 1 128 5 view .LVU52
 165 0008 FFF7FEFF 		bl	smi_read_bits
 166              	.LVL9:
 129:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_read_bits(16, pRegVal);
 167              		.loc 1 129 5 is_stmt 1 view .LVU53
 168 000c 2146     		mov	r1, r4
 169 000e 1020     		movs	r0, #16
 170 0010 FFF7FEFF 		bl	smi_read_bits
 171              	.LVL10:
 130:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     smi_unlock();
 172              		.loc 1 130 5 view .LVU54
 131:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** 
 132:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c ****     return 0;
 173              		.loc 1 132 5 view .LVU55
 133:../Switch/core/drv/master_drv/smi_drv_gpio_sim.c **** }
 174              		.loc 1 133 1 is_stmt 0 view .LVU56
 175 0014 0020     		movs	r0, #0
 176 0016 10BD     		pop	{r4, pc}
 177              		.loc 1 133 1 view .LVU57
 178              		.cfi_endproc
 179              	.LFE9:
 181              		.text
 182              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 smi_drv_gpio_sim.c
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:19     .text.smi_write_bits:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:25     .text.smi_write_bits:00000000 smi_write_bits
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:54     .text.smi_read_bits:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:60     .text.smi_read_bits:00000000 smi_read_bits
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:98     .text.smi_write_cl22:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:104    .text.smi_write_cl22:00000000 smi_write_cl22
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:132    .text.smi_read_cl22:00000000 $t
C:\Users\Dmitriy\AppData\Local\Temp\cc8txfyk.s:138    .text.smi_read_cl22:00000000 smi_read_cl22
                           .group:00000000 wm4.0.645242867a2c3890cfa09ec032a865e6

NO UNDEFINED SYMBOLS
